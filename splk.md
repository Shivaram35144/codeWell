# Splunk Classic Dashboard Guide: Session & PR Event Monitoring

This guide helps you build a full-featured Splunk Classic Dashboard that monitors:
- "Session Started" events
- "PR Generated" events

You’ll include:
- Count panels (for past 1 hour, 24 hours, and all time)
- A combined trend chart
- Bar charts by host/user/source

---

STEP 1: RUN SEARCHES

Go to Splunk > Search & Reporting App and paste the following SPLs.

Replace `your_index_name` and `your_sourcetype_name` as needed.

---

SECTION 1: SESSION STARTED COUNT PANELS

--- Sessions Started (Past 1 Hour) ---
index=your_index_name sourcetype=your_sourcetype_name earliest=-1h
| spath
| search message.body="*session started*"
| stats count AS "Sessions Started (1h)"

--- Sessions Started (Past 24 Hours) ---
index=your_index_name sourcetype=your_sourcetype_name earliest=-24h
| spath
| search message.body="*session started*"
| stats count AS "Sessions Started (24h)"

--- Sessions Started (All Time) ---
index=your_index_name sourcetype=your_sourcetype_name
| spath
| search message.body="*session started*"
| stats count AS "Sessions Started (All Time)"

---

SECTION 2: PR GENERATED COUNT PANELS

--- PRs Generated (Past 1 Hour) ---
index=your_index_name sourcetype=your_sourcetype_name earliest=-1h
| spath
| search message.body="*PR Generated*"
| stats count AS "PRs Generated (1h)"

--- PRs Generated (Past 24 Hours) ---
index=your_index_name sourcetype=your_sourcetype_name earliest=-24h
| spath
| search message.body="*PR Generated*"
| stats count AS "PRs Generated (24h)"

--- PRs Generated (All Time) ---
index=your_index_name sourcetype=your_sourcetype_name
| spath
| search message.body="*PR Generated*"
| stats count AS "PRs Generated (All Time)"

---

SECTION 3: COMBINED TREND CHART (SESSIONS & PRs HOURLY)

--- Combined Trend (Last 24 Hours) ---
index=your_index_name sourcetype=your_sourcetype_name earliest=-24h
| spath
| eval event_type=case(
    like(message.body, "%session started%"), "Session Started",
    like(message.body, "%PR Generated%"), "PR Generated"
)
| search event_type=*
| timechart span=1h count BY event_type

(Choose "Line Chart" as the Visualization Type.)

---

SECTION 4: BAR CHARTS BY HOST / USER / SOURCE

--- Sessions Started by Host ---
index=your_index_name sourcetype=your_sourcetype_name earliest=-24h
| spath
| search message.body="*session started*"
| stats count AS "Sessions Started" by host
| sort - "Sessions Started"

--- PRs Generated by Host ---
index=your_index_name sourcetype=your_sourcetype_name earliest=-24h
| spath
| search message.body="*PR Generated*"
| stats count AS "PRs Generated" by host
| sort - "PRs Generated"

(Note: You can replace 'host' with 'user' or 'source' if those fields exist.)

---

STEP 2: SAVE EACH QUERY TO A CLASSIC DASHBOARD (BASED ON YOUR UI)

1. Run the query in Search & Reporting.
2. Click "Save As" → "New Dashboard" (since it's your first panel).
   - Dashboard Title: e.g., Session & PR Monitor
   - Dashboard Type: Classic Dashboard
   - Permissions: Private or App
   - Visualization: Set to appropriate type (Single Value / Bar / Line)
   - Panel Title: e.g., "Sessions Started (1h)"
   - Click "Save to Dashboard"
3. For all further panels:
   - Run the next query
   - Click "Save As" → "Existing Dashboard"
   - Select the same dashboard (Session & PR Monitor)
   - Provide appropriate Panel Title and Visualization

Repeat this for each SPL query above.

---

SUGGESTED DASHBOARD LAYOUT

Row 1:
- Sessions Started (1h)
- PRs Generated (1h)

Row 2:
- Sessions Started (24h)
- PRs Generated (24h)

Row 3:
- Sessions Started (All Time)
- PRs Generated (All Time)

Row 4:
- Combined Trend Line Chart

Row 5:
- Bar Chart: Sessions by Host
- Bar Chart: PRs by Host

---

OPTIONAL TIPS

- Enable auto-refresh on your dashboard (e.g., every 5 mins).
- Add a Time Picker to let users switch between 1h, 24h, and custom.
- Use color-coding on Single Value panels (available in Classic UI).
- You can clone this dashboard later and change source/sourcetype easily.

---

This concludes your full dashboard setup for dynamically monitoring "Session Started" and "PR Generated" logs using Splunk Classic Dashboard.
